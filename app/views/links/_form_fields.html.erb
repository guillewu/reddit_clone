<label for="link_title">Title</label>
<input id="link_title" name="link[title]" value="<%= @link.title %>">
<br>

<label for="link_url">Url</label>
<input id="link_url" name="link[url]" value="<%= @link.url %>">
<br>

<label for="link_text">Text</label>
<textarea id="link_text" name="link[text]"><%= @link.text %></textarea>
<br><br>

<input type="hidden" name="link[sub_ids][]" value="">
<% Sub.all.each do |sub| %>
  <input type="checkbox"
         id="link_sub_ids_<%= sub.id %>"
         name="link[sub_ids][]"
         value="<%= sub.id %>"
         <%= "checked" if @link.subs.include?(sub) %>>
  <label for="link_sub_ids_<%= sub.id %>"><%= sub.name %></label>
<% end %>